<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>2025 Surface Air Temperature (TaiESM1 ssp245)</title>
    <link rel="stylesheet" href="styles/style.css" />
    <script src="https://d3js.org/d3.v7.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/topojson-client@3/dist/topojson-client.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" defer></script>
    <script type="module" src="scripts/temperature-map.js" defer></script>
  </head>
  <body>
    <header class="page-header">
      <h1>Global warming from 2015 to 2030: Interactive visualization maps of trends and regional differences</h1>

      <div class="team-info">
        <strong>Team:</strong> TerraScope |
        <strong>Members:</strong>
        <a href="mailto:zengxinyi04@gmail.com">Xinyi Zeng</a>
        <a href="mailto:shc085@ucsd.edu">Shujia Chen</a>,
        <a href="mailto:wec003@ucsd.edu">Weiyu Chen</a>,
        <a href="mailto:qz001@ucsd.edu">Qi Zhang</a>,
      </div>
      <h2>What if you could watch climate change unfold like a movie — one month at a time?</h2>
    </header>

    <div class="Overview">
      <h2>Overview</h2>
      <p>Climate change affects every part of the world, and we need to understand both the global trend and how different regions warm over time for interpreting real-world warming. <strong>But</strong> most existing climate visuals only show static maps or isolated trends which is difficult to see how global changes connect to regional experiences. <strong>Therefore</strong>, this project provides an interactive visualization of global surface temperature trends from 2015 to 2030. It allows users to explore warming month by month and compare any country’s pattern within the global context. As a team, we were curious about how warming differs between places we care about , our home countries, places we’ve traveled, and regions we read about in the news. This website enables users to effortlessly discover regional differences and surprising warming hotspots around the world.</p>
    </div>

    <div class="slider-box">
    <!-- 左侧：播放按钮 -->
    <button id="play-btn" class="play-button">
      <span class="icon">▶</span> <span class="text">Play</span>
    </button>

    <!-- 中间：滑条和时间显示 -->
    <div class="slider-group">
      <span id="current-time-display">Loading...</span>
      <input type="range" id="time-slider" min="0" max="0" value="0">
    </div>

    <!-- 右侧：异常模式开关 -->
    <div class="toggle-wrapper">
      <div class="label-group" style="display: flex; align-items: center; gap: 6px;">
        <span class="toggle-label">Anomaly</span>
        <!-- 新增：提示图标和悬浮文本 -->
        <span class="info-icon">?
          <span class="info-tooltip">Difference between current temperature and the 2015 baseline for the same month.</span>
        </span>
      </div>
      
      <label class="switch">
        <input type="checkbox" id="anomaly-toggle">
        <span class="slider round"></span>
      </label>
    </div>

    </div>

    <div class="global-avg-display">
      Global Average: <span id="global-avg-temp">--</span>
    </div>

      <main class="layout">
        <section class="map-wrapper">
          <div id="map"></div>
          <div class="zoom-controls">
              <button id="zoom-in" title="zoom in">+</button>
              <button id="zoom-out" title="zoom out">−</button>
          </div>
        </section>
        <aside class="info-panel">
          <h2>Selected Countries/Regions</h2>
          <ul id="selection-list" class="selection-list"></ul>
        </aside>
      </main>

    <div class="Features-and-Exploration">
        <h2>Features and Exploration</h2>
        <p>This visualization tool offers multi-dimensional analytical perspectives to help users understand the complexity of global warming:</p>

        <section>
            <h3>1. Interactive Map Navigation (Zoom & Pan)</h3>
            <p>
                Users can seamlessly explore regional details using standard mouse interactions (scroll wheel to zoom, click and drag to pan). 
                <strong>This function is fully synchronized</strong>: both the geographical boundaries and the temperature data points scale together, allowing for detailed, high-resolution analysis of localized warming trends.
            </p>
            
            <h3>2. Dynamic Time Series Playback</h3>
            <p>Using the play/pause button and time slider below the map, you can view the dynamic changes in global temperatures over time, year by year or month by month, to intuitively grasp the pace and scale of climate change.</p>

            <h3>3. Temperature Switching</h3>
            <ul>
                <li>
                    <strong>Raw Temperature:</strong> Display actual monthly surface temperature data to aid in understanding absolute temperature levels across different regions.
                </li>
                <li>
                    <strong>Anomaly Mode:</strong> After switching the toggle, the map will display the deviation of the current temperature from the baseline year (2015). This mode is key to understanding climate warming trends, highlighting which regions are warming the fastest and most significantly.
                </li>
            </ul>

            <h3>4. Regional Variation Analysis</h3>
            <ul>
                <li>
                    <strong>Heatmap Coloring:</strong> The map's color intensity represents temperature levels (or anomaly magnitude), clearly showing regions (such as the Arctic and inland areas) where warming may be occurring faster than the global average.
                </li>
                <li>
                    <strong>Country Selection Feature:</strong> Users can click on countries on the map to reveal and highlight them from the “mask.” Selected countries are added to the right-hand list, facilitating focused comparison and observation of long-term changes in specific regions.
                </li>
            </ul>
        </section>

        <section>
            <h2>Technology and Data Sources</h2>
            <ul>
                <li>
                    <strong>Data:</strong> Surface air temperature data used in this project spans from 2015 to 2030 and is presented as global grid data, ensuring high-resolution regional detail.
                </li>
                <li>
                    <strong>Visualization Core:</strong> We employed the powerful D3.js library to construct map and heatmap layers. D3.js's flexibility and performance guarantee smooth playback of time series and precise data presentation.
                </li>
                <li>
                    <strong>Interaction Technology:</strong> Combining HTML/CSS with native JavaScript, we implemented all interactive features including dynamic slider controls, mode switching, country interactions, and instant mouse-over tooltips.
                </li>
            </ul>
        </section>

        <section>
            <h2>Takeaway</h2>
            <p>The most important lesson from this project is that global warming is not uniform, some regions are warming far faster than others, especially the Arctic and northern continents. Our visualization makes this pattern clear because it combines an animated global heatmap with country-level trend lines. It lets users see both the large-scale pattern and the detailed local changes at the same time. This dual perspective, space and time, reveals uneven warming in a way that static maps or single-country charts simply cannot show.</p>
        </section>
    </div>

    <!-- 
      TEMPLATE DEFINITION 
      这里定义了侧边栏项目的 HTML 结构，JS 将克隆这个模板。
    -->
    <template id="sidebar-item-template">
      <li class="selection-list__item" style="flex-direction: column; align-items: stretch;">
        
        <!-- 1. Header -->
        <div class="item-header" style="display: flex; justify-content: space-between; align-items: center;">
          <span class="country-name" style="font-weight:600; font-size:0.9rem;"></span>
          <button class="remove-btn" style="background:none;border:none;cursor:pointer;color:#ef4444;">✕</button>
        </div>

        <!-- 2. Stats Box (Uses classes defined in style.css) -->
        <div class="stats-box" style="display: none;">
          <!-- Primary Stats -->
          <div class="stats-row primary">
            <div class="stat-item"><span class="stat-label">Avg</span><span class="stat-value val-avg">--</span></div>
            <div class="stat-item"><span class="stat-label">Max</span><span class="stat-value val-max">--</span></div>
            <div class="stat-item"><span class="stat-label">Min</span><span class="stat-value val-min">--</span></div>
          </div>
          <!-- Secondary Stats (Seasonal) -->
          <div class="stats-row secondary">
            <div class="stat-item"><span class="stat-label">Spring</span><span class="stat-value val-spring">--</span></div>
            <div class="stat-item"><span class="stat-label">Summer</span><span class="stat-value val-summer">--</span></div>
            <div class="stat-item"><span class="stat-label">Autumn</span><span class="stat-value val-autumn">--</span></div>
            <div class="stat-item"><span class="stat-label">Winter</span><span class="stat-value val-winter">--</span></div>
          </div>
        </div>

        <!-- 3. Chart Container -->
        <div class="chart-container" style="height: 100px; width: 100%; margin-top: 5px;">
          <span class="loading-text" style="font-size:0.7rem;color:#999;">Calculating...</span>
        </div>
      </li>
    </template>

  </body>
</html>